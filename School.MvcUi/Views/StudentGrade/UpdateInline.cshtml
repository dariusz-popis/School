@model IEnumerable<School.DataAccess.Model.StudentGrade>
@{
    ViewBag.Title = "Update Student Grade";
    bool isOnlyOneCourse = ViewContext.RouteData.Values["id"] != null;
    bool isInline = ViewContext.RouteData.Values["inline"] != null;
}

<h2>
    Update Student Grade [In line edit]
    @Html.ActionLink("All courses", "Update", new { id = (string)null }, new { @class = "badge" })
    @Html.ActionLink("Inline edit", "Update", new { inline = "inline" }, new { @class = "badge" })
</h2>
<br>
<table class="table table-condensed table-striped">
    <tr>
        <th></th>
        <th>@Html.DisplayNameFor(model => model.Course.Title)</th>
        <th>Full Name</th>
        <th>@Html.DisplayNameFor(model => model.Grade)</th>
    </tr>
    @foreach (var item in Model.OrderBy(m => m.Course.Title))
    {
        if (!isInline)
        {
            using (Html.BeginForm(new { inline = "inline" }))
            {
                @Html.AntiForgeryToken()
                <tr>
                    <td>@Html.HiddenFor(m => item.EnrollmentID)</td>
                    <td>
                        @if (isOnlyOneCourse)
                        {
                            @item.Course.Title
                        }
                        else
                        {
                            @Html.ActionLink(item.Course.Title, "Update", new { id = item.Course.Title })
                        }
                    </td>
                    <td>@item.Person.FirstName @item.Person.LastName </td>
                    <td>
                        <div class="form-group">
                            @Html.LabelFor(model => item.Grade, htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.EditorFor(model => item.Grade, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="5">
                        <input type="submit" value="Save" class="btn btn-primary" />
                    </td>
                </tr>
            }
        }
    }
</table>

